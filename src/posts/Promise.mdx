---
title: Promise
tag: ES6标准入门阅读总结
---

`Promise `用来处理异步操作， 是构建函数， 参数为 `then `和`catch `后需要执行的方法， 下面是使用 `Promise `封装的`ajax`

~~~js
const getJSON = function(url) {
	const promise = new Promise((resolve, reject) => {
		if(this.readyState !==4) {
   return
		}
		if(this.status === 200) {
			resolve(this.response)
		} else {
			reject(new Error(this.statusText))
		}
		const client = new XMLHttpRequest()
        client.open('GET', url)
        client.onreadystatechange = handler
        client.responseType = 'json'
        client.setRequestHeader("Accept", "application/json")
        client.send()
	})
	return promise
}
getJSON("/posts.json").then(function(json){
	console.log('Contents: ' + json)
}, function(error) {
	console.log('错误', error)
})
~~~